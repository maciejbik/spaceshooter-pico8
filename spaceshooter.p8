pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
function _init()
	p = {
		x=10,
		y=63,
		spd=5
	}
	b={}
	e={}
	pr={}
	ti=0
	cooldown=0
	menu=1
	score=0
	spawntim=30
end
function _update()
	if menu==1 and btn(❎) then
		menu=0 end
	if menu==0 then
	ti+=1 if ti>1000 then ti=0 end
	cooldown-=1
	--player movement
	if btn(⬇️) and p.y<=100 then
	p.y+=p.spd end
	if btn(⬆️) and p.y>=10 then
	p.y-=p.spd end
	if btn(❎) and cooldown<=0
	then crt_blt()
		cooldown=10
	end
	--blt
	upd_blt()
	--enemy
	if ti%spawntim==0 then crt_enm() end
	upd_enm()
	--particles 
	if ti%4==0 then 
	crt_prt() end	upd_prt()
	end
end
function _draw()
	cls()
	
	for i in all(pr) do
		circ(i.x,i.y,i.s) end
	spr(1,p.x,p.y)
	for i in all(b) do
		spr(2,i.x,i.y) end
	for i in all(e) do
		spr(3,i.x,i.y) end
	print(score,60,0)
	
	--main menu
	if menu==1 then
		cls()
		print("press ❎ to start",33,120,7)
		map(1)
	end
end
-->8
function crt_blt()
	local blt={x=p.x,y=p.y}
	add(b,blt)
end
function upd_blt()
	for i in all(b) do
		i.x+=5
		if i.x>128 then
			del(b,i) end
	end
	
	--if bullet hit
	for i in all(b) do
	for j in all(e) do
		if i.x + 4 > j.x and i.x < j.x + 8
		and i.y + 4 > j.y and i.y < j.y + 8 then
			del(b, i) 
			del(e, j)
			score+=10		
			spawntim-=0.5	
			break
		end
	end
end

end
-->8
function crt_enm()
	local en={x=128,y=rnd(128)}
	add(e,en)
end
function upd_enm()
	for i in all(e) do
		i.x-=2
		if i.x<10 then
			del(e,i) end
		if p.x + 8 > i.x and p.x < i.x + 8
		and p.y + 8 > i.y and p.y < i.y + 8 then
				menu=1
				_init()
		end
	end
end
-->8
function crt_prt()
	local pa={x=128,y=rnd(128),
	s=rnd(2),spd=rnd(5,20)}
	add(pr,pa)
end
function upd_prt()
	for i in all(pr) do
		i.x-=i.spd
		if i.x<0 then
			del(pr,i) end
	end
end
__gfx__
00000000000000000000000007700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007000000000000070077770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700007700000000000000777077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700077777700000aa00000077777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700007777070000aa00000077777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700777777000000000000777077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007700000000000070077770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007000000000000007700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777700777000770000000077700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000700707007007700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000700707007070070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777700777007707070000770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000070700007007070000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777700700007007007700777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777700700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000700700000000000007077707770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000700700770007700070070007007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777700770707707077070770077007770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000070707707077070770070070007070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777700700700770007700070077707007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000001011121300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000020212223240000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000100020003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
871200003027030270000002f270302702b270000002b2702b270292700000028270282702b270292702827028270000002427026270262702927029270282702b2702b270292702927028270282702627024270
cb1000001537018370153701837013370173701337017370153701837015370183701337017370133701737011370183701137018370103701737010370173701537015370173701737018370183701737017370
